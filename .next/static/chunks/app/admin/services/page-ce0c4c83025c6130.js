(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6255],{3862:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>b});var r=i(5155),a=i(2115),c=i(8482),t=i(8145),l=i(7168),n=i(9852),d=i(2714),o=i(9474),h=i(9954),v=i(88),x=i(5512),u=i(7271),j=i(8011),m=i(3717),p=i(4616),g=i(4229),f=i(2918),y=i(2559),N=i(2525),A=i(4416);function E(){let{t:e,currentLanguage:s}=(0,u.B)(),{addNotification:i}=(0,j.lk)(),E="ar"===s,[b,w]=(0,a.useState)([]),[C,S]=(0,a.useState)(!0),[k,F]=(0,a.useState)(!1),[J,T]=(0,a.useState)(null),[$,z]=(0,a.useState)({title:"",titleAr:"",description:"",descriptionAr:"",category:"residential",price:0,duration:1,active:!0,featured:!1}),D=async()=>{try{S(!0);let e=await fetch("/api/admin/services");if(e.ok){let s=await e.json();w(s.data||[])}else throw Error("Failed to load services")}catch(e){console.error("Error loading services:",e),i("error",E?"خطأ في تحميل الخدمات":"Error loading services")}finally{S(!1)}},O=async()=>{try{let e=J?"PUT":"POST",s=J?{...$,id:J.id}:$,r=await fetch("/api/admin/services",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(r.ok)await r.json(),i("success",J?E?"تم تحديث الخدمة بنجاح":"Service updated successfully":E?"تم إنشاء الخدمة بنجاح":"Service created successfully"),await D(),F(!1),M();else throw Error("Failed to save service")}catch(e){console.error("Error saving service:",e),i("error",E?"خطأ في حفظ الخدمة":"Error saving service")}},_=async e=>{if(confirm(E?"هل أنت متأكد من حذف هذه الخدمة؟":"Are you sure you want to delete this service?"))try{if((await fetch(`/api/admin/services?id=${e}`,{method:"DELETE"})).ok)i("success",E?"تم حذف الخدمة بنجاح":"Service deleted successfully"),await D();else throw Error("Failed to delete service")}catch(e){console.error("Error deleting service:",e),i("error",E?"خطأ في حذف الخدمة":"Error deleting service")}},P=async e=>{try{if((await fetch("/api/admin/services",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,active:!e.active})})).ok)i("success",E?`تم ${!e.active?"تفعيل":"إلغاء تفعيل"} الخدمة`:`Service ${!e.active?"enabled":"disabled"} successfully`),await D();else throw Error("Failed to toggle service status")}catch(e){console.error("Error toggling service status:",e),i("error",E?"خطأ في تغيير حالة الخدمة":"Error toggling service status")}},M=()=>{T(null),z({title:"",titleAr:"",description:"",descriptionAr:"",category:"residential",price:0,duration:1,active:!0,featured:!1})};return((0,a.useEffect)(()=>{D()},[]),C)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-lg",children:E?"جارٍ التحميل...":"Loading..."})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:E?"إدارة الخدمات":"Services Management"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:E?"إدارة وتحديث الخدمات المقدمة":"Manage and update offered services"})]}),(0,r.jsxs)(l.$,{onClick:()=>{M(),F(!0)},children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),E?"إضافة خدمة":"Add Service"]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.ZB,{children:E?"جميع الخدمات":"All Services"}),(0,r.jsx)(c.BT,{children:E?"إدارة الخدمات المقدمة":"Manage offered services"})]}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:0===b.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:E?"لا توجد خدمات متاحة":"No services available"}):b.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"font-medium",children:E?e.titleAr:e.title}),(0,r.jsxs)("div",{className:"flex space-x-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:[e.price," ",E?"ر.س":"SAR"]}),(0,r.jsxs)("span",{children:[e.duration," ",E?"ساعات":"hours"]}),(0,r.jsx)("span",{className:"capitalize",children:e.category})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(t.E,{variant:e.active?"default":"secondary",children:e.active?E?"نشطة":"Active":E?"غير نشطة":"Inactive"}),e.featured&&(0,r.jsx)(t.E,{variant:"outline",children:E?"مميزة":"Featured"}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{T(e),z({title:e.title,titleAr:e.titleAr,description:e.description,descriptionAr:e.descriptionAr,category:e.category,price:e.price,duration:e.duration,active:e.active,featured:e.featured}),F(!0)},children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-1"}),E?"تعديل":"Edit"]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>P(e),children:[e.active?(0,r.jsx)(f.A,{className:"w-4 h-4 mr-1"}):(0,r.jsx)(y.A,{className:"w-4 h-4 mr-1"}),e.active?E?"إلغاء تفعيل":"Disable":E?"تفعيل":"Enable"]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>_(e.id),children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-1"}),E?"حذف":"Delete"]})]})]},e.id))})})]}),(0,r.jsx)(x.lG,{open:k,onOpenChange:F,children:(0,r.jsxs)(x.Cf,{className:"max-w-2xl",children:[(0,r.jsxs)(x.c7,{children:[(0,r.jsx)(x.L3,{children:J?E?"تعديل الخدمة":"Edit Service":E?"إضافة خدمة جديدة":"Add New Service"}),(0,r.jsx)(x.rr,{children:E?"املأ البيانات التالية لإضافة أو تعديل الخدمة":"Fill in the details to add or edit the service"})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"title",children:E?"اسم الخدمة (إنجليزي)":"Service Name (English)"}),(0,r.jsx)(n.p,{id:"title",value:$.title,onChange:e=>z({...$,title:e.target.value}),placeholder:"Service name in English"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"titleAr",children:E?"اسم الخدمة (عربي)":"Service Name (Arabic)"}),(0,r.jsx)(n.p,{id:"titleAr",value:$.titleAr,onChange:e=>z({...$,titleAr:e.target.value}),placeholder:"اسم الخدمة بالعربية"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"description",children:E?"الوصف (إنجليزي)":"Description (English)"}),(0,r.jsx)(o.T,{id:"description",value:$.description,onChange:e=>z({...$,description:e.target.value}),placeholder:"Service description in English"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"descriptionAr",children:E?"الوصف (عربي)":"Description (Arabic)"}),(0,r.jsx)(o.T,{id:"descriptionAr",value:$.descriptionAr,onChange:e=>z({...$,descriptionAr:e.target.value}),placeholder:"وصف الخدمة بالعربية"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"category",children:E?"الفئة":"Category"}),(0,r.jsxs)(h.l6,{value:$.category,onValueChange:e=>z({...$,category:e}),children:[(0,r.jsx)(h.bq,{children:(0,r.jsx)(h.yv,{placeholder:E?"اختر ا��فئة":"Select category"})}),(0,r.jsxs)(h.gC,{children:[(0,r.jsx)(h.eb,{value:"residential",children:E?"سكني":"Residential"}),(0,r.jsx)(h.eb,{value:"commercial",children:E?"تجاري":"Commercial"}),(0,r.jsx)(h.eb,{value:"specialized",children:E?"متخصص":"Specialized"}),(0,r.jsx)(h.eb,{value:"maintenance",children:E?"صيانة":"Maintenance"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"price",children:E?"السعر (ر.س)":"Price (SAR)"}),(0,r.jsx)(n.p,{id:"price",type:"number",value:$.price,onChange:e=>z({...$,price:Number(e.target.value)}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"duration",children:E?"المدة (ساعات)":"Duration (hours)"}),(0,r.jsx)(n.p,{id:"duration",type:"number",value:$.duration,onChange:e=>z({...$,duration:Number(e.target.value)}),placeholder:"1"})]})]}),(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v.d,{id:"active",checked:$.active,onCheckedChange:e=>z({...$,active:e})}),(0,r.jsx)(d.J,{htmlFor:"active",children:E?"نشطة":"Active"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v.d,{id:"featured",checked:$.featured,onCheckedChange:e=>z({...$,featured:e})}),(0,r.jsx)(d.J,{htmlFor:"featured",children:E?"مميزة":"Featured"})]})]})]}),(0,r.jsxs)(x.Es,{children:[(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>F(!1),children:[(0,r.jsx)(A.A,{className:"w-4 h-4 mr-2"}),E?"إلغاء":"Cancel"]}),(0,r.jsxs)(l.$,{onClick:O,children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),E?"حفظ":"Save"]})]})]})})]})}function b(){return(0,r.jsx)(E,{})}},7696:(e,s,i)=>{Promise.resolve().then(i.bind(i,3862))}},e=>{e.O(0,[8611,1707,8096,2076,7358],()=>e(e.s=7696)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4305],{5003:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),r=t(2115),n=t(8482),l=t(8145),c=t(7168),i=t(9954),d=t(9847),x=t(9397),m=t(9037),h=t(741),o=t(5868),u=t(6697),j=t(4516),g=t(4355),p=t(6785),v=t(8500),f=t(3109),N=t(7580),y=t(1539);let w=()=>{let{theme:e}=(0,d.DP)(),[s,t]=(0,r.useState)("revenue"),[w,b]=(0,r.useState)(null),[k,A]=(0,r.useState)("30d");(0,r.useEffect)(()=>{B()},[s,k]);let B=async()=>{try{let e=await fetch("/data/analytics.json"),s=await e.json(),t={revenue:{daily:s.analytics.revenue.daily||[],monthly:s.analytics.revenue.monthly||[],quarterly:[{quarter:"Q1 2024",amount:65890,growth:12.5},{quarter:"Q2 2024",amount:78230,growth:18.7},{quarter:"Q3 2024",amount:89450,growth:14.3},{quarter:"Q4 2024",amount:95670,growth:6.9}]},services:{performance:s.analytics.services.performance?.map(e=>({name:e.serviceName,revenue:e.revenue,bookings:e.bookings,rating:e.averageRating}))||[],trends:[{service:"تنظيف المنشآت التجارية",trend:"up",change:25.3},{service:"خدمة التعقيم العميق",trend:"up",change:18.7},{service:"تنظيف السجاد والستائر",trend:"stable",change:2.1},{service:"مكافحة الحشرات",trend:"down",change:-5.4}]},customers:{acquisition:s.analytics.customers.acquisition?.map(e=>({month:e.month,new:e.newCustomers,returning:e.totalCustomers-e.newCustomers}))||[],satisfaction:[{rating:5,count:127,percentage:64.5},{rating:4,count:58,percentage:29.4},{rating:3,count:10,percentage:5.1},{rating:2,count:2,percentage:1},{rating:1,count:0,percentage:0}],retention:[{period:"شهر واحد",rate:85.2},{period:"3 أشهر",rate:78.9},{period:"6 أشهر",rate:72.3},{period:"سنة",rate:65.7}]},geographic:{districts:s.analytics.geographic.byDistrict?.map(e=>({name:e.district,revenue:e.revenue,bookings:e.bookings,growth:30*Math.random()-10}))||[]},operational:{efficiency:[{metric:"وقت الاستجابة",current:45,target:30,trend:"up"},{metric:"معدل الإنجاز",current:96.3,target:95,trend:"up"},{metric:"رضا العملاء",current:4.8,target:4.5,trend:"up"},{metric:"الكفاءة التشغيلية",current:87.5,target:90,trend:"down"}],costs:[{category:"الرواتب",amount:15600,percentage:54.8},{category:"المعدات",amount:4890,percentage:17.2},{category:"المواد",amount:3920,percentage:13.8},{category:"النقل",amount:2340,percentage:8.2},{category:"أخرى",amount:1700,percentage:6}]}};b(t)}catch(e){console.error("خطأ في تحميل بيانات الرسوم البيانية:",e)}};if(!w)return(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.A,{className:"w-8 h-8 animate-pulse mx-auto mb-4"}),(0,a.jsx)("p",{children:"جاري تحميل الرسوم البيانية..."})]})});let M=e=>`${e.toLocaleString("ar-SA")} ر.س`,Z=e=>`${e.toFixed(1)}%`;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(i.l6,{value:s,onValueChange:t,children:[(0,a.jsx)(i.bq,{className:"w-48",children:(0,a.jsx)(i.yv,{placeholder:"اختر المؤشر"})}),(0,a.jsxs)(i.gC,{children:[(0,a.jsx)(i.eb,{value:"revenue",children:"الإيرادات"}),(0,a.jsx)(i.eb,{value:"services",children:"الخدمات"}),(0,a.jsx)(i.eb,{value:"customers",children:"العملاء"}),(0,a.jsx)(i.eb,{value:"operations",children:"العمليات"}),(0,a.jsx)(i.eb,{value:"geographic",children:"الجغرافيا"})]})]}),(0,a.jsxs)(i.l6,{value:k,onValueChange:e=>A(e),children:[(0,a.jsx)(i.bq,{className:"w-32",children:(0,a.jsx)(i.yv,{})}),(0,a.jsxs)(i.gC,{children:[(0,a.jsx)(i.eb,{value:"7d",children:"7 أيام"}),(0,a.jsx)(i.eb,{value:"30d",children:"30 يوم"}),(0,a.jsx)(i.eb,{value:"90d",children:"90 يوم"}),(0,a.jsx)(i.eb,{value:"1y",children:"سنة"})]})]})]}),(0,a.jsxs)(c.$,{size:"sm",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"تحديث البيانات"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zp,{className:"col-span-2",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"}),"تطور الإيرادات الشهرية"]}),(0,a.jsx)(n.BT,{children:"مقارنة الإيرادات على مدار الشهور"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 800 300",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"80",height:"30",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 80 0 L 0 0 0 30",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.1"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),w.revenue.monthly.length>1&&(0,a.jsx)("polyline",{fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"3",points:w.revenue.monthly.slice(-10).map((e,s)=>{let t=Math.max(...w.revenue.monthly.map(e=>e.amount)),a=280-e.amount/t*240;return`${s/9*760+20},${a}`}).join(" ")}),w.revenue.monthly.slice(-10).map((e,s)=>{let t=s/9*760+20,r=Math.max(...w.revenue.monthly.map(e=>e.amount)),n=280-e.amount/r*240;return(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:t,cy:n,r:"4",fill:"hsl(var(--primary))"}),(0,a.jsx)("text",{x:t,y:n-15,textAnchor:"middle",fontSize:"10",fill:"currentColor",children:M(e.amount)}),(0,a.jsx)("text",{x:t,y:295,textAnchor:"middle",fontSize:"10",fill:"currentColor",opacity:"0.7",children:new Date(e.month).toLocaleDateString("ar-SA",{month:"short"})})]},s)})]})})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"أداء الخدمات"]}),(0,a.jsx)(n.BT,{children:"إيرادات الخدمات المختلفة"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:w.services.performance.slice(0,6).map((e,s)=>{let t=Math.max(...w.services.performance.map(e=>e.revenue)),r=e.revenue/t*100;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:M(e.revenue)})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary rounded-full h-2 transition-all duration-300",style:{width:`${r}%`}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsxs)("span",{children:[e.bookings," حجز"]}),(0,a.jsxs)("span",{children:[e.rating,"/5 ⭐"]})]})]})]},s)})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"}),"توزيع رضا العملاء"]}),(0,a.jsx)(n.BT,{children:"مستويات رضا العملاء"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,a.jsx)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:(()=>{let e=w.customers.satisfaction.reduce((e,s)=>e+s.count,0),s=0,t=["#22c55e","#3b82f6","#f59e0b","#ef4444","#6b7280"];return w.customers.satisfaction.map((r,n)=>{let l=r.count/e*100/100*360,c=100+80*Math.cos((s-90)*Math.PI/180),i=100+80*Math.sin((s-90)*Math.PI/180),d=100+80*Math.cos((s+l-90)*Math.PI/180),x=100+80*Math.sin((s+l-90)*Math.PI/180),m=["M 100 100 L",c,i,"A 80 80 0",+(l>180),"1",d,x,"Z"].join(" "),h=(0,a.jsx)("path",{d:m,fill:t[n],opacity:"0.8"},n);return s+=l,h})})()})}),(0,a.jsx)("div",{className:"space-y-2",children:w.customers.satisfaction.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`w-3 h-3 rounded-full bg-current ${["text-green-600","text-blue-600","text-yellow-600","text-red-600","text-gray-600"][s]}`}),e.rating," نجوم"]}),(0,a.jsxs)("span",{children:[e.count," (",Z(e.percentage),")"]})]},s))})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"}),"التوزيع الجغرافي للإيرادات"]}),(0,a.jsx)(n.BT,{children:"أداء المناطق المختلفة"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:w.geographic.districts.slice(0,8).map((e,s)=>{let t=Math.max(...w.geographic.districts.map(e=>e.revenue)),r=e.revenue/t*100;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:M(e.revenue)}),(0,a.jsxs)(l.E,{variant:e.growth>0?"default":"secondary",className:"text-xs",children:[e.growth>0?"+":"",Z(e.growth)]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary to-primary/70 rounded-full h-2 transition-all duration-300",style:{width:`${r}%`}})}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.bookings," حجز"]})]})]},s)})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5"}),"مؤشرات الكفاءة التشغيلية"]}),(0,a.jsx)(n.BT,{children:"مقارنة الأداء الحالي بالأهداف"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:w.operational.efficiency.map((e,s)=>{let t=e.current/e.target*100,r=e.current>=e.target;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.metric}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:e.current}),"up"===e.trend?(0,a.jsx)(f.A,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(v.A,{className:"w-4 h-4 text-red-500"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-3",children:(0,a.jsx)("div",{className:`rounded-full h-3 transition-all duration-300 ${r?"bg-green-500":"bg-yellow-500"}`,style:{width:`${Math.min(t,100)}%`}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsxs)("span",{children:["الهدف: ",e.target]}),(0,a.jsxs)("span",{children:[Z(t)," من الهدف"]})]})]})]},s)})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"توزيع التكاليف التشغيلية"]}),(0,a.jsx)(n.BT,{children:"تحليل مفصل للتكاليف"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:w.operational.costs.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-4 h-4 rounded ${["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500"][s]}`}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.category})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold",children:M(e.amount)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:Z(e.percentage)})]})]},s))})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),"أهم الإنجازات"]}),(0,a.jsx)(n.BT,{children:"النقاط البارزة هذا الشهر"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[(0,a.jsx)(f.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-800 dark:text-green-200",children:"زيادة الإيرادات"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"+18.7% مقارنة بالشهر الماضي"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-800 dark:text-blue-200",children:"عملاء جدد"}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"+23 عميل جديد هذا الشهر"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:[(0,a.jsx)(p.A,{className:"w-5 h-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"تحقيق الهدف"}),(0,a.jsx)("p",{className:"text-sm text-yellow-600",children:"105% من هدف الحجوزات"})]})]})]})})]})]})]})};function b(){return(0,a.jsx)(w,{})}},7122:(e,s,t)=>{Promise.resolve().then(t.bind(t,5003))}},e=>{e.O(0,[8611,1707,8096,2076,7358],()=>e(e.s=7122)),_N_E=e.O()}]);
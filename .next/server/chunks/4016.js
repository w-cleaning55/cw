"use strict";exports.id=4016,exports.ids=[4016],exports.modules={14016:(a,b,c)=>{c.d(b,{FirebaseDatabase:()=>d});class d{constructor(a){this.db=null,this.app=null,this.config=a}async connect(){try{try{let{initializeApp:a}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/app'");throw a.code="MODULE_NOT_FOUND",a}),{getFirestore:b,connectFirestoreEmulator:c}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a});return this.app=a(this.config),this.db=b(this.app),!0}catch(a){return console.warn("Firebase packages not installed. Install with: npm install firebase"),!1}}catch(a){return console.error("Firebase connection failed:",a),!1}}async disconnect(){try{if(this.app){let{deleteApp:a}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/app'");throw a.code="MODULE_NOT_FOUND",a});await a(this.app)}}catch(a){console.error("Firebase disconnect failed:",a)}}async testConnection(){try{if(!this.db)return!1;let{doc:a,getDoc:b}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),c=a(this.db,"test","connection");return await b(c),!0}catch(a){return console.error("Firebase connection test failed:",a),!1}}async create(a,b){try{let{collection:c,addDoc:d,serverTimestamp:e}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),f={...b,createdAt:b.createdAt||e(),updatedAt:e()};return{id:(await d(c(this.db,a),f)).id,...f}}catch(a){throw console.error("Firebase create failed:",a),a}}async read(a,b){try{if(b){let{doc:c,getDoc:d}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),e=c(this.db,a,b),f=await d(e);if(f.exists())return{id:f.id,...f.data()};return null}{let{collection:b,getDocs:c}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),d=await c(b(this.db,a)),e={};return e[a]=[],d.forEach(b=>{e[a].push({id:b.id,...b.data()})}),e}}catch(a){throw console.error("Firebase read failed:",a),a}}async update(a,b,c){try{let{doc:d,updateDoc:e,getDoc:f,serverTimestamp:g}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),h=d(this.db,a,b),i={...c,updatedAt:g()};await e(h,i);let j=await f(h);return{id:j.id,...j.data()}}catch(a){throw console.error("Firebase update failed:",a),a}}async delete(a,b){try{let{doc:c,deleteDoc:d}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),e=c(this.db,a,b);return await d(e),!0}catch(a){return console.error("Firebase delete failed:",a),!1}}async query(a,b){try{let{collection:c,query:d,where:e,orderBy:f,limit:g,getDocs:h}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),i=c(this.db,a);if(b){let a=[];Object.keys(b).forEach(c=>{let d=b[c];null!=d&&("_orderBy"===c?a.push(f(d.field,d.direction||"asc")):"_limit"===c?a.push(g(d)):a.push(e(c,"==",d)))}),a.length>0&&(i=d(i,...a))}let j=await h(i),k=[];return j.forEach(a=>{k.push({id:a.id,...a.data()})}),k}catch(a){throw console.error("Firebase query failed:",a),a}}async count(a,b){try{let{collection:c,query:d,where:e,getCountFromServer:f}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),g=c(this.db,a);if(b){let a=[];Object.keys(b).forEach(c=>{let d=b[c];null!=d&&"_orderBy"!==c&&"_limit"!==c&&a.push(e(c,"==",d))}),a.length>0&&(g=d(g,...a))}return(await f(g)).data().count}catch(a){return console.error("Firebase count failed:",a),0}}async backup(){try{let a={};for(let b of["services","bookings","customers","users","messages","notifications"])a[b]=await this.read(b);return a}catch(a){throw console.error("Firebase backup failed:",a),a}}async restore(a){try{let{writeBatch:b}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),c=b(this.db);for(let[b,d]of Object.entries(a))if(Array.isArray(d))for(let a of d){let{doc:d}=await Promise.resolve().then(function(){var a=Error("Cannot find module 'firebase/firestore'");throw a.code="MODULE_NOT_FOUND",a}),e=d(this.db,b,a.id||"");c.set(e,a)}return await c.commit(),!0}catch(a){return console.error("Firebase restore failed:",a),!1}}}}};